<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeloBoard - Gestão de OS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="logo">
            <i data-feather="tool"></i>
            <h1>ZeloBoard</h1>
            <span class="subtitle">Gestão de Próprios Públicos</span>
        </div>
        <div class="user-info">
            <div class="user-avatar">
                <i data-feather="user"></i>
            </div>
            <div class="user-details">
                <span class="user-name">João Silva</span>
                <span class="user-role">SAR03</span>
            </div>
            <div class="date">
                <i data-feather="calendar"></i>
                <span>24/05/2025</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" data-tab="dashboard">
                <i data-feather="bar-chart-2"></i>
                <span>Dashboard</span>
            </button>
            <button class="tab" data-tab="kanban">
                <i data-feather="trello"></i>
                <span>Kanban OS</span>
            </button>
            <button class="tab" data-tab="relatorios">
                <i data-feather="trending-up"></i>
                <span>Relatórios</span>
            </button>
        </div>

        <!-- Floating Action Button for New OS -->
        <button class="fab" onclick="openModal('nova-os-modal')">
            <i data-feather="plus"></i>
        </button>

        <div class="content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="page-header">
                    <h2>Dashboard</h2>
                    <p class="page-subtitle">Visão geral das ordens de serviço</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-feather="file-text"></i>
                        </div>
                        <div class="stat-content">
                            <h3>47</h3>
                            <p>OS Abertas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-feather="play-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3>23</h3>
                            <p>Em Execução</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-feather="check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3>156</h3>
                            <p>Finalizadas (Mês)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-feather="clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3>4.2 dias</h3>
                            <p>Tempo Médio</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>
                                <i data-feather="alert-triangle"></i>
                                OS Urgentes
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="os-item urgent">
                                <div class="os-info">
                                    <div class="os-number">OS #2025-0847</div>
                                    <div class="os-title">Vazamento hidráulico</div>
                                    <div class="os-location">
                                        <i data-feather="map-pin"></i>
                                        CEU Continental
                                    </div>
                                </div>
                                <div class="os-priority urgent">
                                    <i data-feather="zap"></i>
                                </div>
                            </div>
                            <div class="os-item urgent">
                                <div class="os-info">
                                    <div class="os-number">OS #2025-0851</div>
                                    <div class="os-title">Elétrica - Quadro principal</div>
                                    <div class="os-location">
                                        <i data-feather="map-pin"></i>
                                        UBS Macedo
                                    </div>
                                </div>
                                <div class="os-priority urgent">
                                    <i data-feather="zap"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>
                                <i data-feather="package"></i>
                                Materiais Mais Usados
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="material-item">
                                <div class="material-info">
                                    <span class="material-name">Cimento (sacos)</span>
                                    <span class="material-count">127</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%;"></div>
                                </div>
                            </div>
                            <div class="material-item">
                                <div class="material-info">
                                    <span class="material-name">Tinta (litros)</span>
                                    <span class="material-count">89</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%;"></div>
                                </div>
                            </div>
                            <div class="material-item">
                                <div class="material-info">
                                    <span class="material-name">Areia (m³)</span>
                                    <span class="material-count">45</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 30%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kanban Tab -->
            <div id="kanban" class="tab-content">
                <div class="page-header">
                    <h2>Kanban</h2>
                    <p class="page-subtitle">Fluxo de ordens de serviço</p>
                </div>
                
                <div class="kanban-board">
                    <div class="kanban-column">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <div class="status-indicator cadastradas"></div>
                                <h3>Cadastradas</h3>
                            </div>
                            <div class="kanban-count">8</div>
                        </div>
                        
                        <div class="os-card" onclick="openModal('os-detail')">
                            <div class="os-number">OS #2025-0852</div>
                            <div class="os-title">Reparo de telhado</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                Escola Municipal Vila Galvão
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Maria Santos - Secretaria de Educação
                            </div>
                            <div class="os-priority normal">
                                <i data-feather="minus-circle"></i>
                                Normal
                            </div>
                        </div>

                        <div class="os-card">
                            <div class="os-number">OS #2025-0853</div>
                            <div class="os-title">Pintura externa</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                UBS Centro
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Carlos Lima - SAR02
                            </div>
                            <div class="os-priority low">
                                <i data-feather="chevron-down"></i>
                                Baixa
                            </div>
                        </div>
                    </div>

                    <div class="kanban-column">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <div class="status-indicator validacao"></div>
                                <h3>Validação</h3>
                            </div>
                            <div class="kanban-count">5</div>
                        </div>
                        
                        <div class="os-card">
                            <div class="os-number">OS #2025-0847</div>
                            <div class="os-title">Vazamento hidráulico</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                CEU Continental
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Ana Costa - Diretoria CEU
                            </div>
                            <div class="os-priority urgent">
                                <i data-feather="alert-circle"></i>
                                Urgente
                            </div>
                        </div>
                    </div>

                    <div class="kanban-column">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <div class="status-indicator vistoria"></div>
                                <h3>Vistoria</h3>
                            </div>
                            <div class="kanban-count">3</div>
                        </div>
                        
                        <div class="os-card">
                            <div class="os-number">OS #2025-0845</div>
                            <div class="os-title">Troca de lâmpadas</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                Biblioteca Municipal
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Pedro Oliveira - Cultura
                            </div>
                            <div class="os-priority normal">
                                <i data-feather="minus-circle"></i>
                                Normal
                            </div>
                        </div>
                    </div>

                    <div class="kanban-column">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <div class="status-indicator programada"></div>
                                <h3>Programada</h3>
                            </div>
                            <div class="kanban-count">12</div>
                        </div>
                        
                        <div class="os-card">
                            <div class="os-number">OS #2025-0840</div>
                            <div class="os-title">Reforma do banheiro</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                Centro de Saúde Ponte Grande
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Dra. Fernanda - Coordenação UBS
                            </div>
                            <div class="os-priority normal">
                                <i data-feather="minus-circle"></i>
                                Normal
                            </div>
                        </div>
                    </div>

                    <div class="kanban-column">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <div class="status-indicator execucao"></div>
                                <h3>Em Execução</h3>
                            </div>
                            <div class="kanban-count">7</div>
                        </div>
                        
                        <div class="os-card">
                            <div class="os-number">OS #2025-0835</div>
                            <div class="os-title">Conserto do portão</div>
                            <div class="os-location">
                                <i data-feather="map-pin"></i>
                                EMEI Jardim São João
                            </div>
                            <div class="os-requester">
                                <i data-feather="user"></i>
                                Lucia Ferreira - Diretora EMEI
                            </div>
                            <div class="os-priority normal">
                                <i data-feather="minus-circle"></i>
                                Normal
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relatórios Tab with updated icons -->
            <div id="relatorios" class="tab-content">
                <div class="page-header">
                    <h2>Relatórios</h2>
                    <p class="page-subtitle">Analytics e dados estatísticos</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>
                                <i data-feather="pie-chart"></i>
                                OS por Tipo de Serviço
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="chart-item">
                                <div class="chart-info">
                                    <i data-feather="droplet"></i>
                                    <span>Hidráulica</span>
                                    <strong>34 OS</strong>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%;"></div>
                                </div>
                            </div>
                            <div class="chart-item">
                                <div class="chart-info">
                                    <i data-feather="zap"></i>
                                    <span>Elétrica</span>
                                    <strong>28 OS</strong>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 70%;"></div>
                                </div>
                            </div>
                            <div class="chart-item">
                                <div class="chart-info">
                                    <i data-feather="tool"></i>
                                    <span>Pintura</span>
                                    <strong>22 OS</strong>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 55%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>
                                <i data-feather="clock"></i>
                                Tempo Médio por Divisão
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="time-item">
                                <div class="time-info">
                                    <i data-feather="users"></i>
                                    <strong>SAR03.01 (Construção)</strong>
                                    <span>Tempo médio: 6.8 dias</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 68%;"></div>
                                </div>
                            </div>
                            <div class="time-item">
                                <div class="time-info">
                                    <i data-feather="users"></i>
                                    <strong>SAR03.03 (Manutenção)</strong>
                                    <span>Tempo médio: 3.2 dias</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 32%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="report-actions">
                    <button class="btn btn-secondary" onclick="exportToPDF()">
                        <i data-feather="file-text"></i>
                        Gerar Relatório Completo (PDF)
                    </button>
                    <button class="btn btn-secondary" onclick="exportToExcel()">
                        <i data-feather="download"></i>
                        Exportar para Excel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for New OS -->
    <div id="nova-os-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <i data-feather="plus-circle"></i>
                    Nova Ordem de Serviço
                </h2>
                <button class="modal-close" onclick="closeModal('nova-os-modal')">
                    <i data-feather="x"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="nova-os-form" class="form-container">
                    <div class="form-section">
                        <h3>Informações Básicas</h3>
                        <div class="form-group">
                            <label for="sei-number">
                                <i data-feather="file"></i>
                                Número do SEI (opcional)
                            </label>
                            <input type="text" id="sei-number" placeholder="Ex: 1129.2025/0000916-7">
                        </div>

                        <div class="form-group">
                            <label for="solicitante">
                                <i data-feather="user"></i>
                                Solicitante *
                            </label>
                            <input type="text" id="solicitante" placeholder="Nome completo" required>
                        </div>

                        <div class="form-group">
                            <label for="orgao">
                                <i data-feather="building"></i>
                                Órgão/Secretaria *
                            </label>
                            <select id="orgao" required>
                                <option value="">Selecione...</option>
                                <option value="educacao">Secretaria de Educação</option>
                                <option value="saude">Secretaria de Saúde</option>
                                <option value="cultura">Secretaria de Cultura</option>
                                <option value="sar">Secretaria de Adm. Regionais</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="local">
                                <i data-feather="map-pin"></i>
                                Local do Serviço *
                            </label>
                            <input type="text" id="local" placeholder="Ex: CEU Continental, UBS Centro..." required>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Detalhes do Serviço</h3>
                        <div class="form-group">
                            <label for="tipo-servico">
                                <i data-feather="tool"></i>
                                Tipo de Serviço *
                            </label>
                            <select id="tipo-servico" onchange="showAISuggestions()" required>
                                <option value="">Selecione...</option>
                                <option value="hidraulica">Hidráulica</option>
                                <option value="eletrica">Elétrica</option>
                                <option value="pintura">Pintura</option>
                                <option value="carpintaria">Carpintaria</option>
                                <option value="serralheria">Serralheria</option>
                                <option value="alvenaria">Alvenaria</option>
                                <option value="telhado">Telhado</option>
                                <option value="limpeza">Limpeza</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="urgencia">
                                <i data-feather="alert-triangle"></i>
                                Urgência *
                            </label>
                            <select id="urgencia" required>
                                <option value="">Selecione...</option>
                                <option value="urgente">Urgente (risco/segurança)</option>
                                <option value="normal">Normal (até 15 dias)</option>
                                <option value="baixa">Baixa (até 30 dias)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="descricao">
                                <i data-feather="edit-3"></i>
                                Descrição do Problema *
                            </label>
                            <textarea id="descricao" rows="4" placeholder="Descreva detalhadamente o problema encontrado..." required></textarea>
                        </div>

                        <div id="ai-suggestions" class="ai-suggestions" style="display: none;">
                            <div class="ai-header">
                                <i data-feather="cpu"></i>
                                <strong>Sugestões Inteligentes - Base de Conhecimento</strong>
                            </div>
                            <div id="suggestions-content">
                                <!-- Suggestions will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="fotos">
                                <i data-feather="camera"></i>
                                Fotos (opcional)
                            </label>
                            <input type="file" id="fotos" multiple accept="image/*">
                            <small>Máximo 5 fotos, 10MB cada</small>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="createOS(event)">
                                <i data-feather="check"></i>
                                Criar Ordem de Serviço
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal for OS Details -->
    <div id="os-detail" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <i data-feather="eye"></i>
                    OS #2025-0852 - Detalhes
                </h2>
                <button class="modal-close" onclick="closeModal('os-detail')">
                    <i data-feather="x"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="detail-grid">
                    <div class="detail-item">
                        <i data-feather="map-pin"></i>
                        <div>
                            <strong>Local</strong>
                            <span>Escola Municipal Vila Galvão</span>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i data-feather="user"></i>
                        <div>
                            <strong>Solicitante</strong>
                            <span>Maria Santos - Secretaria de Educação</span>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i data-feather="calendar"></i>
                        <div>
                            <strong>Data</strong>
                            <span>20/05/2025</span>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i data-feather="tool"></i>
                        <div>
                            <strong>Tipo</strong>
                            <span>Manutenção - Telhado</span>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i data-feather="alert-triangle"></i>
                        <div>
                            <strong>Urgência</strong>
                            <span>Normal</span>
                        </div>
                    </div>
                </div>

                <div class="ai-suggestions">
                    <div class="ai-header">
                        <i data-feather="cpu"></i>
                        <strong>Sugestões da Base de Conhecimento</strong>
                    </div>
                    <div class="suggestion-item">
                        <div class="suggestion-header">
                            <i data-feather="lightbulb"></i>
                            <strong>Caso Similar Encontrado</strong>
                        </div>
                        <div class="suggestion-content">
                            <p>OS #2024-1247 - Reparo de telhado na EMEI Jardim Adriana (Nov/2024)</p>
                            <div class="suggestion-details">
                                <span><strong>Materiais usados:</strong> Telhas cerâmicas (50 un), Argamassa (8 sacos)</span>
                                <span><strong>Tempo:</strong> 3 dias | <strong>Equipe:</strong> SAR03.03-A</span>
                            </div>
                            <a href="#" class="suggestion-link">
                                <i data-feather="external-link"></i>
                                Ver relatório completo desta OS
                            </a>
                        </div>
                    </div>
                    <div class="suggestion-item">
                        <div class="suggestion-header">
                            <i data-feather="package"></i>
                            <strong>Materiais Recomendados</strong>
                        </div>
                        <div class="suggestion-content">
                            <ul class="materials-list">
                                <li>Telhas cerâmicas (estimativa: 45-60 unidades)</li>
                                <li>Argamassa colante (6-10 sacos)</li>
                                <li>Impermeabilizante (2 latas de 18L)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="description-section">
                    <h3>
                        <i data-feather="edit-3"></i>
                        Descrição do Problema
                    </h3>
                    <div class="description-content">
                        Goteiras no telhado da sala de aula 3 e corredor principal. Problema se agrava durante chuvas intensas, 
                        prejudicando as atividades escolares. Algumas telhas aparentam estar quebradas ou deslocadas.
                    </div>
                </div>

                <div class="photos-section">
                    <h3>
                        <i data-feather="camera"></i>
                        Fotos Anexadas
                    </h3>
                    <div class="photos-grid">
                        <div class="photo-placeholder">
                            <i data-feather="image"></i>
                            <span>Foto 1</span>
                            <small>Goteira sala 3</small>
                        </div>
                        <div class="photo-placeholder">
                            <i data-feather="image"></i>
                            <span>Foto 2</span>
                            <small>Telhas quebradas</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" onclick="alert('OS movida para Validação')">
                    <i data-feather="check"></i>
                    Validar e Prosseguir
                </button>
                <button class="btn btn-secondary" onclick="alert('Mais informações solicitadas')">
                    <i data-feather="help-circle"></i>
                    Solicitar Mais Informações
                </button>
            </div>
        </div>
    </div>

    </div>

    <!-- Just load our script -->
    <script src="script.js"></script>
</body>
</html>